{"version":3,"sources":["webpack:///src/pages/admin/layout-banner-management.vue","webpack:///./src/pages/admin/layout-banner-management.vue?a6ca","webpack:///./src/pages/admin/layout-banner-management.vue"],"names":["layout_banner_management","data","postData","token","bannerImageList","resouceOptions","contentTypeOptions","label","value","disabled","tableData","total","addFormDialog","visible","title","isAdd","bigImgVisible","formLabelWidth","formInputWidth","form","id","imageSrc","validTimeStart","validTimeEnd","validTime","contentType","resouceLink","searchForm","currentPage","pageSize","mounted","this","getQiniuToken","handleSearch","handleProjectListAll","watch","searchForm.validTime","newVal","oldVal","addFormDialog.form.validTime","methods","self","url","$api","layoutBannerList","console","log","$axiosPOST","res","list","handleShowAddForm","row","key","push","handleContentTypeChange","alert","sysProjectListAll","index","option","name","code","toString","handleAddBanner","layoutBannerAdd","$message","handleUpdateBanner","layoutBannerUpdate","handleAvatarSuccess","file","qiniuImagePreLink","handleAvatarError","submitUpload","$refs","uploadBatch","submit","beforeAvatarUpload","isJPG","type","isPNG","isLt2M","size","isFull","length","$alert","error","qiniuToken","handleDeleteBanner","_this","then","layoutBannerDelete","item","handleClickPage","page","handleSizeChange","handlePictureCardPreview","handleRemoveUpload","fileList","dateFormatter","column","date","property","undefined","$formatDate","Date","admin_layout_banner_management","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","to","path","_v","style","width","value-format","range-separator","start-placeholder","end-placeholder","align","model","callback","$$v","$set","expression","on","click","$event","staticStyle","prop","scopedSlots","_u","fn","scope","src","height","formatter","fixed","background","current-page","page-sizes","page-size","layout","size-change","current-change","update:visible","ref","label-width","action","qiniuUploadLink","list-type","file-list","multiple","on-preview","on-success","before-upload","on-error","on-remove","clearable","placeholder","change","_l","filterable","slot","alt","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/12.6ba126ea55c7dca01659.js","sourcesContent":["<template>\n<div class=\"page-body\">\n  <div class=\"page-header\">\n    <el-breadcrumb>\n      <el-breadcrumb-item :to=\"{path: '/'}\"><i class=\"fa fa-home\"></i></el-breadcrumb-item>\n      <el-breadcrumb-item >Banner 设置</el-breadcrumb-item>\n    </el-breadcrumb>\n  </div>\n\n  <div class=\"box\">\n    <el-date-picker\n      v-model=\"searchForm.validTime\"\n      size=\"small\"\n      type=\"datetimerange\"\n      value-format=\"timestamp\"\n      range-separator=\"至\"\n      start-placeholder=\"有效时间起\"\n      end-placeholder=\"有效时间止\"\n      :style=\"{width: '400px'}\"\n      align=\"right\">\n    </el-date-picker>\n    <p></p>\n    <m-button type=\"info\" size=\"small\" @click=\"handleSearch\"><i class=\"fa fa-search\"> 搜索</i></m-button>\n    <m-button type=\"info\" size=\"small\" @click=\"handleShowAddForm(null)\"><i class=\"fa fa-plus\"> 添加</i></m-button>\n    <p></p>\n    <el-table :data=\"tableData\" style=\"width: 100% \">\n      <el-table-column prop=\"id\" label=\"ID\" align=\"center\"></el-table-column>\n      <el-table-column label=\"Banner\">\n        <template slot-scope=\"scope\">\n          <img :src=\"scope.row.imageSrc\" height=\"40\"/>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"validTimeStart\" :formatter=\"dateFormatter\" label=\"有效时间起\"></el-table-column>\n      <el-table-column prop=\"validTimeEnd\" :formatter=\"dateFormatter\" label=\"有效时间起\"></el-table-column>\n      <el-table-column prop=\"updateTime\" :formatter=\"dateFormatter\" label=\"编辑时间\"></el-table-column>\n      <el-table-column label=\"操作\" fixed=\"right\" width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-button @click=\"handleShowAddForm(scope.row)\" type=\"text\">编辑</el-button>\n          <el-button @click=\"handleDeleteBanner(scope.row.id)\" type=\"text\">刪除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <p></p>\n    <el-pagination background\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleClickPage\"\n      :current-page=\"searchForm.currentPage\"\n      :page-sizes=\"[10, 20, 30, 40]\"\n      :page-size=\"searchForm.pageSize\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"total\">\n    </el-pagination>\n  </div>\n\n  <el-dialog :title=\"addFormDialog.title\" :visible.sync=\"addFormDialog.visible\">\n    <el-form ref=\"form\" :label-width=\"addFormDialog.formLabelWidth\" :model=\"addFormDialog.form\">\n      <el-form-item label=\"Banner\" >\n        <el-upload ref=\"upload\"\n                   :action=\"this.$api.qiniuUploadLink\"\n                   list-type=\"picture\"\n                   :file-list=\"bannerImageList\"\n                   :multiple=\"false\"\n                   :data=\"postData\"\n                   :on-preview=\"handlePictureCardPreview\"\n                   :on-success=\"handleAvatarSuccess\"\n                   :before-upload=\"beforeAvatarUpload\"\n                   :on-error=\"handleAvatarError\"\n                   :on-remove=\"handleRemoveUpload\"\n                   :style=\"{width: this.addFormDialog.formInputWidth}\">\n          <el-button size=\"mini\" class=\"el-icon-plus\"> 添加图片</el-button>\n        </el-upload>\n      </el-form-item>\n      <el-form-item label=\"内容类型\" >\n        <el-select size=\"small\" v-model=\"addFormDialog.form.contentType\" clearable placeholder=\"选择内容类型\"\n                   :style=\"{width: this.addFormDialog.formInputWidth}\" @change=\"handleContentTypeChange\">\n          <el-option\n            v-for=\"(item,key) in contentTypeOptions\"\n            :key=\"key\"\n            :disabled=\"item.disabled\"\n            :label=\"item.label\"\n            :value=\"item.value\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"Banner有效期\" >\n        <el-date-picker\n          v-model=\"addFormDialog.form.validTime\"\n          size=\"small\"\n          type=\"datetimerange\"\n          value-format=\"timestamp\"\n          range-separator=\"至\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\"\n          :style=\"{width: this.addFormDialog.formInputWidth}\"\n          align=\"right\">\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"指向内容\" >\n        <el-select size=\"small\" v-model=\"addFormDialog.form.resouceLink\" clearable placeholder=\"选择指向内容\"\n                   :style=\"{width: this.addFormDialog.formInputWidth}\">\n          <el-option\n            filterable\n            v-for=\"(item,index) in resouceOptions\"\n            :key=\"index\"\n            :label=\"item.label\"\n            :value=\"item.value\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n\n    </el-form>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button size=\"small\" @click=\"addFormDialog.visible = false\">取 消</el-button>\n      <el-button size=\"small\" type=\"primary\" @click=\"addFormDialog.isAdd ? handleAddBanner() : handleUpdateBanner()\">确 定</el-button>\n    </div>\n  </el-dialog>\n  <!--放大图-->\n  <el-dialog :visible.sync=\"addFormDialog.bigImgVisible\">\n    <img width=\"100%\" :src=\"addFormDialog.form.imageSrc\" alt=\"\">\n  </el-dialog>\n</div>\n</template>\n<script>\n  export default {\n    data () {\n      return {\n        postData: {\n          token: ''\n        },\n        bannerImageList: [],\n        resouceOptions: [],\n        contentTypeOptions: [\n          {\n            label: '项目',\n            value: 0\n          },\n          {\n            label: '测试',\n            value: 2\n          },\n          {\n            disabled: true,\n            label: '资讯',\n            value: 1\n          }],\n        tableData: [],\n        total: 0,\n        addFormDialog: {\n          visible: false,\n          title: '',\n          isAdd: '',\n          bigImgVisible: false,\n          formLabelWidth: '130px',\n          formInputWidth: '400px',\n          form: {\n            id: '',\n            imageSrc: '',\n            validTimeStart: '',\n            validTimeEnd: '',\n            validTime: '',\n            contentType: 0,\n            resouceLink: ''\n          }\n        },\n        searchForm: {\n          validTime: [],\n          validTimeStart: '',\n          validTimeEnd: '',\n          currentPage: 1,\n          pageSize: 10\n        }\n      }\n    },\n    mounted () {\n      this.getQiniuToken()\n      this.handleSearch()\n      this.handleProjectListAll()\n    },\n    watch: {\n      'searchForm.validTime' (newVal, oldVal) {\n        this.searchForm.validTimeStart = newVal[0]\n        this.searchForm.validTimeEnd = newVal[1]\n      },\n      'addFormDialog.form.validTime' (newVal, oldVal) {\n        this.addFormDialog.form.validTimeStart = newVal[0]\n        this.addFormDialog.form.validTimeEnd = newVal[1]\n      }\n    },\n    methods: {\n      // 初始化数据\n      handleSearch () {\n        let self = this\n        let url = self.$api.layoutBannerList\n        let succeed = function (res) {\n          self.tableData = res.data.list\n          self.total = res.data.total\n        }\n        console.log(self.searchForm)\n        self.$axiosPOST(url, self.searchForm, succeed)\n      },\n      // 显示表单 dialog\n      handleShowAddForm (row) {\n        let self = this\n        self.addFormDialog.form.validTime = []\n        self.addFormDialog.form.validTimeStart = ''\n        self.addFormDialog.form.validTimeEnd = ''\n        self.addFormDialog.form.imageSrc = ''\n        self.addFormDialog.form.contentType = 0\n        self.addFormDialog.form.resouceLink = ''\n        self.resouceOptions = []\n        self.bannerImageList = []\n        if (row === null || row === '') {\n          self.addFormDialog.title = '添加Banner'\n          self.addFormDialog.isAdd = true\n        } else {\n          self.addFormDialog.title = '修改Banner'\n          self.addFormDialog.isAdd = false\n          for (let key in row) {\n            self.addFormDialog.form[key] = row[key]\n          }\n          self.addFormDialog.form.validTime.push(row.validTimeStart)\n          self.addFormDialog.form.validTime.push(row.validTimeEnd)\n          self.handleContentTypeChange()\n        }\n        self.addFormDialog.visible = true\n      },\n      // 表单banner内容类型变更函数\n      handleContentTypeChange () {\n        if (this.addFormDialog.form.contentType === 0) { // 项目列表回调\n          this.handleProjectListAll()\n        }\n        if (this.addFormDialog.form.contentType === 1) { // 资讯列表回调\n          alert('资讯列表回调')\n        }\n      },\n      // 获取项目列表\n      handleProjectListAll () {\n        let self = this\n        let url = self.$api.sysProjectListAll\n        let succeed = function (res) {\n          console.log(res.data)\n          self.resouceOptions = []\n          for (let index in res.data) {\n            let option = res.data[index]\n            if (self.addFormDialog.form.contentType === 0) { // 项目\n              self.resouceOptions.push({\n                label: '项目：' + option.name + '【' + option.code + '】',\n                value: option.id.toString()\n              })\n            } else {\n              self.resouceOptions = []\n              self.resouceOptions.push({\n                label: '资讯标题',\n                value: option.id\n              })\n            }\n          }\n        }\n        self.$axiosPOST(url, self.addFormDialog.form, succeed)\n      },\n      // 添加表单提交\n      handleAddBanner () {\n        let self = this\n        let url = self.$api.layoutBannerAdd\n        let succeed = function (res) {\n          self.$message('Banner添加成功')\n          self.handleSearch()\n          self.addFormDialog.visible = false\n        }\n        self.$axiosPOST(url, self.addFormDialog.form, succeed)\n      },\n      // 修改表单提交\n      handleUpdateBanner () {\n        let self = this\n        let url = self.$api.layoutBannerUpdate\n        let succeed = function (res) {\n          self.$message('Banner修改成功')\n          self.handleSearch()\n          self.addFormDialog.visible = false\n        }\n        self.$axiosPOST(url, self.addFormDialog.form, succeed)\n      },\n      handleAvatarSuccess (res, file) { // 上传成功后在图片框显示图片\n        this.$message('Banner已成功上传，请及时提交')\n        this.addFormDialog.form.imageSrc = this.$api.qiniuImagePreLink + res.key\n      },\n      handleAvatarError (res) { // 显示错误\n        this.$message('上传失败')\n        console.log(res)\n      },\n      // 手动上传方法\n      submitUpload () {\n        this.$refs.uploadBatch.submit()\n      },\n      beforeAvatarUpload (file) { // 在图片提交前进行验证\n        const isJPG = file.type === 'image/jpeg'\n        const isPNG = file.type === 'image/png'\n        const isLt2M = file.size / 1024 / 1024 < 2\n\n        const isFull = this.bannerImageList.length > 0 ? true : false;\n        if (isFull) {\n          this.$alert('只能上传一个Banner图片', '提示')\n        }\n\n        if (!isJPG && !isPNG) {\n          this.$message.error('上传头像图片只能是 JPG/PNG 格式!')\n        }\n        if (!isLt2M) {\n          this.$message.error('上传头像图片大小不能超过 2MB!')\n        }\n        return !isFull && (isJPG || isPNG) && isLt2M\n      },\n      getQiniuToken () {\n        let self = this\n        let success = function (res) {\n          self.postData.token = res.data\n        }\n        self.$axiosPOST(self.$api.qiniuToken, {}, success)\n      },\n      //  删除指定id的Banner\n      handleDeleteBanner (id) {\n        this.$alert('确认删除banner？注意：删除后无法恢复', '警告', {\n          type: 'warning'\n        }).then(res => {\n          this.$axiosPOST(this.$api.layoutBannerDelete + '/' + id, {}, item => {\n            this.$message('删除成功')\n            this.handleSearch()\n          })\n        })\n      },\n      // 翻页\n      handleClickPage (page) {\n        this.searchForm.currentPage = page\n        this.handleSearch()\n      },\n      // 分页扩容\n      handleSizeChange (pageSize) {\n        this.searchForm.pageSize = pageSize\n        this.handleSearch()\n      },\n      // 放大回调\n      handlePictureCardPreview (file) {\n        this.addFormDialog.form.imageSrc = file.url\n        this.addFormDialog.bigImgVisible = true\n      },\n      // 上传删除回调\n      handleRemoveUpload (file, fileList) {\n        console.log('上传删除：', file, fileList)\n      },\n      // 时间戳格式化\n      dateFormatter (row, column) {\n        var date = row[column.property]\n        if (date === undefined || date === null) {\n          return ''\n        }\n        return this.$formatDate(new Date(date), 'YYYY-MM-DD HH:mm:ss')\n      }\n    }\n  }\n</script>\n<style>\n  .box-body{\n    width: 100%;\n    overflow: auto;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/admin/layout-banner-management.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-body\"},[_c('div',{staticClass:\"page-header\"},[_c('el-breadcrumb',[_c('el-breadcrumb-item',{attrs:{\"to\":{path: '/'}}},[_c('i',{staticClass:\"fa fa-home\"})]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"Banner 设置\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('el-date-picker',{style:({width: '400px'}),attrs:{\"size\":\"small\",\"type\":\"datetimerange\",\"value-format\":\"timestamp\",\"range-separator\":\"至\",\"start-placeholder\":\"有效时间起\",\"end-placeholder\":\"有效时间止\",\"align\":\"right\"},model:{value:(_vm.searchForm.validTime),callback:function ($$v) {_vm.$set(_vm.searchForm, \"validTime\", $$v)},expression:\"searchForm.validTime\"}}),_vm._v(\" \"),_c('p'),_vm._v(\" \"),_c('m-button',{attrs:{\"type\":\"info\",\"size\":\"small\"},on:{\"click\":_vm.handleSearch}},[_c('i',{staticClass:\"fa fa-search\"},[_vm._v(\" 搜索\")])]),_vm._v(\" \"),_c('m-button',{attrs:{\"type\":\"info\",\"size\":\"small\"},on:{\"click\":function($event){_vm.handleShowAddForm(null)}}},[_c('i',{staticClass:\"fa fa-plus\"},[_vm._v(\" 添加\")])]),_vm._v(\" \"),_c('p'),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Banner\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{attrs:{\"src\":scope.row.imageSrc,\"height\":\"40\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"validTimeStart\",\"formatter\":_vm.dateFormatter,\"label\":\"有效时间起\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"validTimeEnd\",\"formatter\":_vm.dateFormatter,\"label\":\"有效时间起\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"updateTime\",\"formatter\":_vm.dateFormatter,\"label\":\"编辑时间\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.handleShowAddForm(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.handleDeleteBanner(scope.row.id)}}},[_vm._v(\"刪除\")])]}}])})],1),_vm._v(\" \"),_c('p'),_vm._v(\" \"),_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.searchForm.currentPage,\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.searchForm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleClickPage}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.addFormDialog.title,\"visible\":_vm.addFormDialog.visible},on:{\"update:visible\":function($event){_vm.$set(_vm.addFormDialog, \"visible\", $event)}}},[_c('el-form',{ref:\"form\",attrs:{\"label-width\":_vm.addFormDialog.formLabelWidth,\"model\":_vm.addFormDialog.form}},[_c('el-form-item',{attrs:{\"label\":\"Banner\"}},[_c('el-upload',{ref:\"upload\",style:({width: this.addFormDialog.formInputWidth}),attrs:{\"action\":this.$api.qiniuUploadLink,\"list-type\":\"picture\",\"file-list\":_vm.bannerImageList,\"multiple\":false,\"data\":_vm.postData,\"on-preview\":_vm.handlePictureCardPreview,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload,\"on-error\":_vm.handleAvatarError,\"on-remove\":_vm.handleRemoveUpload}},[_c('el-button',{staticClass:\"el-icon-plus\",attrs:{\"size\":\"mini\"}},[_vm._v(\" 添加图片\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"内容类型\"}},[_c('el-select',{style:({width: this.addFormDialog.formInputWidth}),attrs:{\"size\":\"small\",\"clearable\":\"\",\"placeholder\":\"选择内容类型\"},on:{\"change\":_vm.handleContentTypeChange},model:{value:(_vm.addFormDialog.form.contentType),callback:function ($$v) {_vm.$set(_vm.addFormDialog.form, \"contentType\", $$v)},expression:\"addFormDialog.form.contentType\"}},_vm._l((_vm.contentTypeOptions),function(item,key){return _c('el-option',{key:key,attrs:{\"disabled\":item.disabled,\"label\":item.label,\"value\":item.value}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Banner有效期\"}},[_c('el-date-picker',{style:({width: this.addFormDialog.formInputWidth}),attrs:{\"size\":\"small\",\"type\":\"datetimerange\",\"value-format\":\"timestamp\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"align\":\"right\"},model:{value:(_vm.addFormDialog.form.validTime),callback:function ($$v) {_vm.$set(_vm.addFormDialog.form, \"validTime\", $$v)},expression:\"addFormDialog.form.validTime\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"指向内容\"}},[_c('el-select',{style:({width: this.addFormDialog.formInputWidth}),attrs:{\"size\":\"small\",\"clearable\":\"\",\"placeholder\":\"选择指向内容\"},model:{value:(_vm.addFormDialog.form.resouceLink),callback:function ($$v) {_vm.$set(_vm.addFormDialog.form, \"resouceLink\", $$v)},expression:\"addFormDialog.form.resouceLink\"}},_vm._l((_vm.resouceOptions),function(item,index){return _c('el-option',{key:index,attrs:{\"filterable\":\"\",\"label\":item.label,\"value\":item.value}})}))],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.addFormDialog.visible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.addFormDialog.isAdd ? _vm.handleAddBanner() : _vm.handleUpdateBanner()}}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.addFormDialog.bigImgVisible},on:{\"update:visible\":function($event){_vm.$set(_vm.addFormDialog, \"bigImgVisible\", $event)}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.addFormDialog.form.imageSrc,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-29015cbe\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/admin/layout-banner-management.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-29015cbe\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./layout-banner-management.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./layout-banner-management.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./layout-banner-management.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29015cbe\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./layout-banner-management.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/admin/layout-banner-management.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}